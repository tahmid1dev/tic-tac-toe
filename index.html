<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nexora AI - Tic Tac Toe</title>
  <meta name="admverifysite" content="7c9a278e989ad9c45cc1be9484f65019" />

  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin: 0; background: #f4f4f4; }
    .hidden { display: none; }
    #login-screen { padding: 60px; }
    .google-btn { background: #4285F4; color: white; border: none; padding: 12px 24px; font-size: 18px; border-radius: 6px; cursor: pointer; }
    #profile { margin: 20px auto; padding: 10px; background: white; border-radius: 10px; width: fit-content; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
    #profile img { border-radius: 50%; width: 60px; height: 60px; }
    #signout-btn { background: #DB4437; color: white; border: none; padding: 8px 18px; margin-top: 10px; border-radius: 6px; cursor: pointer; }

    #game-board { display: grid; grid-template-columns: repeat(3, 100px); gap: 5px; justify-content: center; margin: 20px auto; }
    .cell { width: 100px; height: 100px; background: white; border-radius: 10px; font-size: 40px; display: flex; justify-content: center; align-items: center; cursor: pointer; box-shadow: 0 2px 6px rgba(0,0,0,0.3); transition: transform 0.2s; }
    .cell:hover { transform: scale(1.05); }
    .win { background: #4CAF50 !important; color: white; animation: flash 0.6s alternate infinite; }
    @keyframes flash { from { background:#4CAF50; } to { background:#81C784; } }
  </style>
</head>
<body>

  <!-- Login Screen -->
  <div id="login-screen">
    <h1>Welcome to Nexora Tic Tac Toe</h1>
    <button class="google-btn" onclick="googleLogin()">Continue with Google</button>
  </div>

  <!-- Profile -->
  <div id="profile" class="hidden">
    <img id="user-pic" src="">
    <h3 id="user-name"></h3>
    <p id="user-email"></p>
    <button id="signout-btn" onclick="googleLogout()">Sign Out</button>
  </div>

  <!-- Game -->
  <div id="game-screen" class="hidden">
    <h2>Tic Tac Toe</h2>
    <p id="status">Player X’s turn</p>
    <div id="game-board"></div>
  </div>

  <!-- BD Ads Network -->
  <div id="adm-container-1770"></div>
  <script data-cfasync="false" async type="text/javascript" src="//bdadsnetwork.com/display/items.php?1770&1329&0&0&18&0&0"></script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCEJcoBHBxl2UY-1eFURduX3h5M2bAP-Gc",
      authDomain: "nexora-ai-cabb7.firebaseapp.com",
      projectId: "nexora-ai-cabb7",
      storageBucket: "nexora-ai-cabb7.firebasestorage.app",
      messagingSenderId: "709302061659",
      appId: "1:709302061659:web:ddab826758da672ded4d7e"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const provider = new GoogleAuthProvider();

    // Login
    window.googleLogin = async function() {
      try {
        await signInWithPopup(auth, provider);
      } catch (err) {
        alert("Login failed: " + err.message);
      }
    };

    // Logout
    window.googleLogout = function() {
      signOut(auth);
    };

    // On state change
    onAuthStateChanged(auth, (user) => {
      if (user) {
        document.getElementById("login-screen").classList.add("hidden");
        document.getElementById("game-screen").classList.remove("hidden");
        document.getElementById("profile").classList.remove("hidden");

        document.getElementById("user-pic").src = user.photoURL;
        document.getElementById("user-name").innerText = user.displayName;
        document.getElementById("user-email").innerText = user.email;
      } else {
        document.getElementById("login-screen").classList.remove("hidden");
        document.getElementById("game-screen").classList.add("hidden");
        document.getElementById("profile").classList.add("hidden");
      }
    });

    // Tic Tac Toe
    const board = document.getElementById("game-board");
    let cells = [];
    let currentPlayer = "X";
    let gameActive = true;

    function createBoard() {
      board.innerHTML = "";
      cells = [];
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        cell.addEventListener("click", () => cellClick(cell, i));
        board.appendChild(cell);
        cells.push("");
      }
    }

    function cellClick(cell, index) {
      if (cells[index] !== "" || !gameActive) return;
      cells[index] = currentPlayer;
      cell.textContent = currentPlayer;

      if (checkWin()) {
        document.getElementById("status").innerText = `Player ${currentPlayer} wins!`;
        gameActive = false;
        return;
      }

      if (!cells.includes("")) {
        document.getElementById("status").innerText = "Draw!";
        gameActive = false;
        return;
      }

      currentPlayer = currentPlayer === "X" ? "O" : "X";
      document.getElementById("status").innerText = `Player ${currentPlayer}’s turn`;
    }

    function checkWin() {
      const wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      for (let combo of wins) {
        const [a,b,c] = combo;
        if (cells[a] && cells[a] === cells[b] && cells[a] === cells[c]) {
          const allCells = document.querySelectorAll(".cell");
          allCells[a].classList.add("win");
          allCells[b].classList.add("win");
          allCells[c].classList.add("win");
          return true;
        }
      }
      return false;
    }

    createBoard();
  </script>
</body>
</html>
